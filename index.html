<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>socket.io</title>
  </head>
  <body>
         <canvas id="canvas" width="2000" height="2000"></canvas>
         <script src="/socket.io/socket.io.js" type="text/javascript"></script>
         <script type="text/javascript">
           var socket = io.connect();

           socket.on('nuevo pixel', dibujar);

           window.addEventListener('onmousemove', function(e) {
             var p = {
               x: e.clientX,
               y: e.clientY
             }

             dibujar(p);

             socket.emit('pixel', p);
           });

           var context = document.getElementById('canvas').getContext('2d');
           function dibujar(p) {
             context.fillRect(p.x, p.y, 5, 5);
           }
         </script>
  </body>
</html>
